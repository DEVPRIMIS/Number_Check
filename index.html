<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NumRep Check ‚Äì Analyse compl√®te de num√©ro</title>
  <script src="https://unpkg.com/libphonenumber-js@1.10.14/bundle/libphonenumber-js.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #444;
    }
    input[type="text"] {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      font-size: 16px;
    }
    button {
      width: 100%;
      padding: 12px;
      background: #007bff;
      color: white;
      border: none;
      font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    button:hover {
      background: #0056b3;
    }
    .results {
      margin-top: 20px;
      padding: 15px;
      background: #eef;
      border-radius: 8px;
    }
    .signal-button {
      background: #dc3545;
      margin-top: 5px;
    }
    .signal-button:hover {
      background: #a71d2a;
    }
    a {
      color: #007bff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .section-title {
      margin-top: 20px;
      font-weight: bold;
      font-size: 1.1em;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîç NumRep Check</h1>
    <input type="text" id="phoneInput" placeholder="Entre un num√©ro (ex : +33612345678)" />
    <button onclick="analyzeNumber()">Analyser</button>

    <div class="results" id="results" style="display:none;"></div>
  </div>

  <script>
    // Analyse + affichage
    function analyzeNumber() {
      const number = document.getElementById("phoneInput").value.trim();
      const resultsDiv = document.getElementById("results");
      resultsDiv.style.display = "block";

      if (!number.startsWith("+")) {
        resultsDiv.innerHTML = '‚ùå Format invalide. Le num√©ro doit commencer par "+" et indicatif.';
        return;
      }

      try {
        const phoneUtil = window.libphonenumber;
        const parsed = phoneUtil.parsePhoneNumber(number);

        if (!parsed.isValid()) {
          resultsDiv.innerHTML = `‚ùå Le num√©ro est invalide.`;
          return;
        }

        const country = parsed.country || "Inconnu";
        const national = parsed.formatNational();
        const type = parsed.getType();

        let typeStr = "Inconnu";
        switch(type) {
          case "MOBILE": typeStr = "Mobile"; break;
          case "FIXED_LINE": typeStr = "Fixe"; break;
          case "VOIP": typeStr = "VoIP (Internet)"; break;
          case "TOLL_FREE": typeStr = "Num√©ro gratuit"; break;
        }

        // R√©putation simul√©e
        const fakeReputation = number.startsWith("+229") ? "üî¥ Risqu√© (signal√©)" : "üü¢ S√ªr";

        // Liens Google Dorks pr√©fabriqu√©s
        const encodedNum = encodeURIComponent(number);
        const searchLinks = `
          <ul>
            <li><a href="https://www.google.com/search?q=site%3Achat.whatsapp.com+${encodedNum}" target="_blank" rel="noopener">Groupes WhatsApp publics</a></li>
            <li><a href="https://www.google.com/search?q=site%3Ascamcallfighters.com+${encodedNum}" target="_blank" rel="noopener">Sites de signalements</a></li>
            <li><a href="https://www.google.com/search?q=%22${encodedNum}%22+arnaque" target="_blank" rel="noopener">Recherches arnaque g√©n√©rales</a></li>
          </ul>
        `;

        // Gestion du compteur de signalement dans localStorage
        const signals = JSON.parse(localStorage.getItem("signals") || "{}");
        const currentSignals = signals[number] || 0;

        const signalText = currentSignals === 0 ? 
          "Ce num√©ro n‚Äôa pas encore √©t√© signal√©." : 
          `Ce num√©ro a √©t√© signal√© <strong>${currentSignals}</strong> fois.`;

        resultsDiv.innerHTML = `
          <strong>R√©sultat pour :</strong> ${number}<br><br>
          ‚úÖ <strong>Pays :</strong> ${country}<br>
          üìû <strong>Format national :</strong> ${national}<br>
          üîç <strong>Type :</strong> ${typeStr}<br>
          ‚ö†Ô∏è <strong>R√©putation estim√©e :</strong> ${fakeReputation}<br><br>

          <div class="section-title">üîé Pr√©sence sur le Web</div>
          ${searchLinks}

          <div class="section-title">üö® Signalements communautaires</div>
          <p>${signalText}</p>
          <button class="signal-button" onclick="signalNumber('${number}')">üö© Signaler ce num√©ro</button>

          <div class="section-title">üîì V√©rification dans les leaks</div>
          <p>Ce service ne permet pas une v√©rification automatique dans les bases de donn√©es compromises. Vous pouvez v√©rifier manuellement sur : 
          <a href="https://haveibeenpwned.com/" target="_blank" rel="noopener">Have I Been Pwned</a>.</p>
          <p>Si ce num√©ro est li√© √† un e-mail compromis, cela appara√Ætra l√†-bas.</p>
        `;

      } catch (e) {
        resultsDiv.innerHTML = `‚ùå Erreur de traitement. V√©rifiez le format du num√©ro.`;
      }
    }

    // Fonction signaler le num√©ro, stockage local
    function signalNumber(number) {
      const signals = JSON.parse(localStorage.getItem("signals") || "{}");
      signals[number] = (signals[number] || 0) + 1;
      localStorage.setItem("signals", JSON.stringify(signals));
      alert(`Merci, vous avez signal√© le num√©ro ${number}.`);
      analyzeNumber(); // refresh affichage
    }
  </script>
</body>
</html> 
